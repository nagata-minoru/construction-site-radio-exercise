<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å·¥äº‹ç¾å ´ãƒ©ã‚¸ã‚ªä½“æ“å‰ã®ã€Œ3åˆ†é–“å‹•ç”»ã€</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Kosugi+Maru&family=M+PLUS+Rounded+1c:wght@700;900&family=Noto+Sans+JP:wght@400;700;900&display=swap');

    body {
      margin: 0;
      padding: 0;
      font-family: 'M PLUS Rounded 1c', sans-serif;
      background-color: #f5f5f5;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);
    }

    .container {
      position: relative;
      width: 90%;
      max-width: 800px;
      height: 500px;
      background-color: #fff;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      overflow: hidden;
      padding: 30px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      background-size: cover;
      background-position: center;
    }

    .safety-tape {
      position: absolute;
      height: 30px;
      width: 120%;
      left: -10%;
      background: repeating-linear-gradient(
        45deg,
        #ffeb3b,
        #ffeb3b 20px,
        #000 20px,
        #000 40px
      );
      transform: rotate(-2deg);
    }

    .safety-tape.top {
      top: 15px;
    }

    .safety-tape.bottom {
      bottom: 15px;
    }

    .title-screen {
      text-align: center;
      opacity: 0;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 20px;
      box-sizing: border-box;
      background-color: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(2px);
    }

    .title {
      font-size: 36px;
      font-weight: 900;
      color: #ff6700;
      text-shadow: 3px 3px 0 #ffe082;
      margin-bottom: 20px;
      line-height: 1.3;
      background-color: rgba(255, 255, 255, 0.7);
      padding: 15px 25px;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    }

    .section-title {
      font-size: 24px;
      font-weight: 700;
      color: #ff6700;
      margin-bottom: 20px;
      border-bottom: 4px solid #ffeb3b;
      padding-bottom: 5px;
      display: inline-block;
      background-color: rgba(255, 255, 255, 0.7);
      padding: 5px 15px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    .narrator-text {
      font-size: 20px;
      line-height: 1.6;
      color: #333;
      margin-bottom: 15px;
      opacity: 0;
      transform: translateY(20px);
      background-color: rgba(255, 255, 255, 0.7);
      padding: 10px 15px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .highlight {
      background-color: #ffeb3b;
      padding: 2px 5px;
      border-radius: 4px;
      font-weight: 700;
    }

    .emoji {
      font-size: 28px;
      vertical-align: middle;
      margin: 0 5px;
    }

    .ending {
      font-size: 32px;
      font-weight: 900;
      color: #ff6700;
      text-align: center;
      opacity: 0;
      transform: scale(0.8);
      text-shadow: 2px 2px 0 #ffe082;
      background-color: rgba(255, 255, 255, 0.7);
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    }

    .buttons {
      position: absolute;
      bottom: 20px;
      left: 0;
      width: 100%;
      display: flex;
      justify-content: center;
      gap: 20px;
    }

    .button {
      padding: 10px 20px;
      background-color: #ff6700;
      color: white;
      border: none;
      border-radius: 50px;
      font-family: 'M PLUS Rounded 1c', sans-serif;
      font-weight: 700;
      font-size: 16px;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
    }

    .button:hover {
      transform: translateY(-3px);
      box-shadow: 0 7px 14px rgba(0, 0, 0, 0.2);
      background-color: #ff8c00;
    }

    .button:active {
      transform: translateY(1px);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .hard-hat {
      position: absolute;
      width: 80px;
      height: 80px;
      background-color: #ffeb3b;
      border-radius: 50% 50% 0 0;
      top: -50px;
      right: 30px;
      transform: rotate(15deg);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    .hard-hat:before {
      content: '';
      position: absolute;
      width: 90px;
      height: 20px;
      background-color: #ffeb3b;
      bottom: 0;
      left: -5px;
      border-radius: 5px;
    }

    .weather-icon {
      font-size: 60px;
      margin-bottom: 10px;
      color: #ff6700;
    }

    .quiz-box {
      background-color: #f0f8ff;
      border: 3px dashed #ff6700;
      border-radius: 15px;
      padding: 15px;
      margin: 20px 0;
      position: relative;
    }

    .quiz-box:before {
      content: "?";
      position: absolute;
      top: -25px;
      right: -15px;
      background-color: #ff6700;
      color: white;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
      font-weight: 900;
      box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
    }

    .progress-container {
      position: absolute;
      bottom: 80px;
      width: 80%;
      left: 10%;
      height: 6px;
      background-color: #e0e0e0;
      border-radius: 3px;
    }

    .progress-bar {
      width: 0%;
      height: 100%;
      background-color: #ff6700;
      border-radius: 3px;
      transition: width 0.5s ease;
    }

    @media (max-width: 600px) {
      .container {
        height: auto;
        min-height: 400px;
      }

      .title {
        font-size: 28px;
      }

      .narrator-text {
        font-size: 16px;
      }

      .ending {
        font-size: 24px;
      }
    }
  </style>
  <script src="./getWeather.js" defer></script>
  <script src="./config.js" defer></script>
</head>
<body>
  <div class="container">
    <div class="safety-tape top"></div>
    <div class="safety-tape bottom"></div>
    <div class="hard-hat"></div>

    <!-- ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ -->
    <div class="title-screen" id="title-screen">
      <div class="title">ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ï¼<br>ä»Šæ—¥ã‚‚å®‰å…¨ç¬¬ä¸€ã§ã„ãã¾ã—ã‚‡ã†ï¼</div>
    </div>

    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³1: æœã®æŒ¨æ‹¶ã¨ç¬‘é¡”ãƒã‚§ãƒƒã‚¯ -->
    <div class="title-screen" id="section1">
      <div class="section-title">æœã®æŒ¨æ‹¶ã¨ç¬‘é¡”ãƒã‚§ãƒƒã‚¯</div>
      <p class="narrator-text">ã€ŒãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ï¼ä»Šæ—¥ã‚‚æœã‹ã‚‰ç¾å ´ã®ã¿ã‚“ãªã€ã‚ˆã‰æ¥ã¨ã‚‹ã­ã€œã€‚æ˜¨æ—¥ã¯ã¡ã‚ƒã‚“ã¨å¯ãŸï¼Ÿé¡”è‰²ã©ã†ã‚„ï¼Ÿ</p>
      <p class="narrator-text">ã¿ã‚“ãªã€ã¾ãšã¯éš£ã®äººã¨ç›®ã‚’åˆã‚ã›ã¦ã€<span class="highlight">ãƒ‹ã‚³ãƒƒã¨ä¸€ç™º</span>ã€ç¬‘é¡”ã®ç¢ºèªãŸã„ï¼ã€</p>
      <p class="narrator-text"><span class="emoji">ğŸ˜Š</span> ã€ŒãŠã¯ã‚ˆã†ï¼ã€ <span class="emoji">ğŸ‘‹</span></p>
    </div>

    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³2: ä»Šæ—¥ã®ãƒ¯ãƒ³ãƒã‚¤ãƒ³ãƒˆå®‰å…¨ç¢ºèª -->
    <div class="title-screen" id="section2">
      <div class="section-title">ä»Šæ—¥ã®ãƒ¯ãƒ³ãƒã‚¤ãƒ³ãƒˆå®‰å…¨ç¢ºèª</div>
      <p class="narrator-text">ã€Œã•ã¦ã€ä»Šæ—¥ã‚‚å®‰å…¨ç¬¬ä¸€ï¼ã¿ã‚“ãªã€ãƒ˜ãƒ«ãƒ¡ãƒƒãƒˆã€æ‰‹è¢‹ã€ä½œæ¥­é´ã€ã¡ã‚ƒã‚“ã¨ãƒã‚§ãƒƒã‚¯ã—ã¨ã‚‹ã‚„ï¼Ÿ</p>
      <p class="narrator-text">ç¾å ´ã®ãƒ«ãƒ¼ãƒ«ã€ã‚‚ã†ä¸€å›ãŠã•ã‚‰ã„ã—ã¨ã“ã€‚</p>
      <p class="narrator-text"><span class="highlight">ç„¡ç†ã›ãš</span>ã€<span class="highlight">å£°ã‹ã‘åˆã†ã¦</span>ã€<span class="highlight">åˆ†ã‹ã‚‰ã‚“ã“ã¨ã¯ã™ãèã</span>ã€‚</p>
      <p class="narrator-text">ã“ã‚ŒãŒä¸€ç•ªå¤§äº‹ãŸã„ï¼ã€</p>
    </div>

    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³3: å¤©æ°—ãƒ»æ°—æ¸©ã¨ä»Šæ—¥ã®æ³¨æ„äº‹é … -->
    <div class="title-screen" id="section3">
      <div class="section-title">å¤©æ°—ãƒ»æ°—æ¸©ã¨ä»Šæ—¥ã®æ³¨æ„äº‹é …</div>
      <div class="weather-icon">â˜€ï¸</div>
      <p class="narrator-text">ã€Œä»Šæ—¥ã¯å¤©æ°—ãŒ<span id="weather-text">ã€‡ã€‡</span>ã€æ°—æ¸©ã¯<span id="temp-text">ã€‡ã€‡</span>åº¦ã€‚æš‘ã‹ã£ãŸã‚Šå¯’ã‹ã£ãŸã‚Šã™ã‚‹ã‘ã‚“ã€ä½“èª¿ã‚‚æ°—ã«ã—ã¨ã“ã†ã‚„ã€‚</p>
      <p class="narrator-text"><span class="highlight">æ°´åˆ†è£œçµ¦ã¯ã“ã¾ã‚ã«</span>ã€ä¼‘æ†©ã‚‚é æ…®ã›ã‚“ã§å–ã‚‹ã“ã¨ï¼</p>
      <p class="narrator-text">ç†±ä¸­ç—‡ã‚„è»¢å€’ã«ã¯ç‰¹ã«æ°—ã‚’ã¤ã‘ã¦ã„ã“ã†ã€‚ã€</p>
    </div>

    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³4: ã¡ã‚‡ã£ã¨ä¸€è¨€ã‚¯ã‚¤ã‚ºï¼†ãƒ¦ãƒ¼ãƒ¢ã‚¢ -->
    <div class="title-screen" id="section4">
      <div class="section-title">ã¡ã‚‡ã£ã¨ä¸€è¨€ã‚¯ã‚¤ã‚ºï¼†ãƒ¦ãƒ¼ãƒ¢ã‚¢</div>
      <div class="quiz-box">
        <p class="narrator-text">ã€Œã“ã“ã§ãƒŠã‚¾ãƒŠã‚¾ãŸã„ï¼</p>
        <p class="narrator-text">ã€å·¥äº‹ç¾å ´ã§ä¸€ç•ªå£°ãŒå¤§ãã„é“å…·ã¯ãªã‚“ã§ã—ã‚‡ã†ï¼Ÿã€</p>
      </div>
      <p class="narrator-text" id="answer">ç­”ãˆã¯ã€<span class="highlight">ãƒãƒ³ãƒãƒ¼</span>ï¼ˆåŠç«¯ãªã„å£°ï¼ãƒãƒ³ãƒãƒ¼ï¼‰ã€ã‚„ã£ãŸã€‚</p>
      <p class="narrator-text">ä»Šæ—¥ã‚‚å…ƒæ°—ã«å£°å‡ºã—ã¦ã„ã“ã†ï¼ã€</p>
    </div>

    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³5: ãƒ©ã‚¸ã‚ªä½“æ“ã¸ã®èª˜å° -->
    <div class="title-screen" id="section5">
      <div class="section-title">ãƒ©ã‚¸ã‚ªä½“æ“ã¸ã®èª˜å°</div>
      <p class="narrator-text">ã€Œãã‚Œã˜ã‚ƒã‚ã€ä½“æ“ã®æ™‚é–“ãŒã‚„ã£ã¦ããŸã°ã„ï¼ã‚±ã‚¬ã›ã‚“ã‚ˆã†ã€ã—ã£ã‹ã‚Šä¼¸ã°ã—ã¦ã€èº«ä½“ã‚‚å¿ƒã‚‚ã‚·ãƒ£ã‚­ãƒƒã¨ç›®è¦šã‚ã•ã›ã‚ˆã†ã‚„ã€‚</p>
      <p class="narrator-text">ã¿ã‚“ãªã€æº–å‚™ã¯ã‚ˆã‹ã­ï¼Ÿ</p>
      <p class="narrator-text">ãã‚Œã˜ã‚ƒã€ãƒ©ã‚¸ã‚ªä½“æ“ã€<span class="highlight">ã‚¹ã‚¿ãƒ¼ãƒˆ</span>ï¼ã€</p>
    </div>

    <!-- ã‚¨ãƒ³ãƒ‰ã‚«ãƒ¼ãƒ‰ -->
    <div class="title-screen" id="ending">
      <div class="ending">ä»Šæ—¥ã‚‚ä¸€æ—¥ã€ã”å®‰å…¨ã«ï¼<br>è¡Œã£ã¦ã‚‰ã£ã—ã‚ƒã„ï¼</div>
    </div>

    <div class="progress-container">
      <div class="progress-bar" id="progress-bar"></div>
    </div>

    <div class="buttons">
      <button class="button" id="prev-btn">å‰ã¸</button>
      <button class="button" id="next-btn">æ¬¡ã¸</button>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // ç”»é¢ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å–å¾—
      const sections = [
        document.getElementById('title-screen'),
        document.getElementById('section1'),
        document.getElementById('section2'),
        document.getElementById('section3'),
        document.getElementById('section4'),
        document.getElementById('section5'),
        document.getElementById('ending')
      ];

      // ãƒœã‚¿ãƒ³è¦ç´ ã¨é€²æ—ãƒãƒ¼ã‚’å–å¾—
      const prevBtn = document.getElementById('prev-btn');
      const nextBtn = document.getElementById('next-btn');
      const progressBar = document.getElementById('progress-bar');
      const answer = document.getElementById('answer');

      // ç¾åœ¨ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
      let currentSectionIndex = 0;
      answer.style.opacity = 0;

      // åˆæœŸè¡¨ç¤º
      showSection(currentSectionIndex);
      updateProgressBar();

      // ã€Œæ¬¡ã¸ã€ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
      nextBtn.addEventListener('click', function() {
        if (currentSectionIndex === sections.length - 1) {
          // æœ€å¾Œã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã€Œçµ‚äº†ã€ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸå ´åˆ
          hideSection(currentSectionIndex);
          currentSectionIndex = 0; // æœ€åˆã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«æˆ»ã™
          showSection(currentSectionIndex);
          updateProgressBar();
          return;
        }

        if (currentSectionIndex === 3 && answer.style.opacity === '0') {
          // ã‚¯ã‚¤ã‚ºã®ç­”ãˆã‚’è¡¨ç¤º
          gsap.to(answer, {
            opacity: 1,
            duration: 0.8,
            ease: 'power2.out'
          });
          return;
        }

        if (currentSectionIndex < sections.length - 1) {
          hideSection(currentSectionIndex);
          currentSectionIndex++;
          showSection(currentSectionIndex);
          updateProgressBar();
        }
      });

      // ã€Œå‰ã¸ã€ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
      prevBtn.addEventListener('click', function() {
        if (currentSectionIndex > 0) {
          hideSection(currentSectionIndex);
          currentSectionIndex--;
          showSection(currentSectionIndex);
          updateProgressBar();

          // ã‚¯ã‚¤ã‚ºã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«æˆ»ã£ãŸå ´åˆã€ç­”ãˆã‚’éè¡¨ç¤ºã«
          if (currentSectionIndex === 3) {
            answer.style.opacity = 0;
          }
        }
      });

      // ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
      function showSection(index) {
        // ä»–ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’éè¡¨ç¤ºã«ã™ã‚‹
        sections.forEach((section, i) => {
          if (i !== index) {
            section.style.display = 'none';
          }
        });

        // ã‚³ãƒ³ãƒ†ãƒŠã®èƒŒæ™¯ç”»åƒã‚’æ›´æ–°
        const container = document.querySelector('.container');

        // ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«å¿œã˜ãŸèƒŒæ™¯ç”»åƒã‚’è¨­å®š
        switch(index) {
          case 0: // ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢
            container.style.backgroundImage = "url('./01.png')";
            break;
          case 1: // æœã®æŒ¨æ‹¶
            container.style.backgroundImage = "url('./02.png')";
            break;
          case 2: // å®‰å…¨ç¢ºèª
            container.style.backgroundImage = "url('./03.png')";
            break;
          case 3: // å¤©æ°—ãƒ»æ°—æ¸©
            container.style.backgroundImage = "url('./04.png')";
            break;
          case 4: // ã‚¯ã‚¤ã‚º
            container.style.backgroundImage = "url('./05.png')";
            break;
          case 5: // ãƒ©ã‚¸ã‚ªä½“æ“
            container.style.backgroundImage = "url('./06.png')";
            break;
          case 6: // ã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°
            container.style.backgroundImage = "url('./07.png')";
            break;
        }

        // é¸æŠã•ã‚ŒãŸã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹
        sections[index].style.display = 'flex';

        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        gsap.to(sections[index], {
          opacity: 1,
          duration: 0.8,
          ease: 'power2.out'
        });

        // ãƒ†ã‚­ã‚¹ãƒˆã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        const narratorTexts = sections[index].querySelectorAll('.narrator-text');
        narratorTexts.forEach((text, i) => {
          gsap.fromTo(text,
            { opacity: 0, y: 20 },
            {
              opacity: 1,
              y: 0,
              duration: 0.6,
              delay: i * 0.2,
              ease: 'power2.out'
            }
          );
        });

        if (index === 0) {
          // ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ã®ç‰¹åˆ¥ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
          const title = sections[index].querySelector('.title');
          gsap.fromTo(title,
            { scale: 0.8, opacity: 0 },
            {
              scale: 1,
              opacity: 1,
              duration: 1,
              ease: 'elastic.out(1, 0.3)'
            }
          );
        } else if (index === sections.length - 1) {
          // ã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã®ç‰¹åˆ¥ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
          const ending = sections[index].querySelector('.ending');
          gsap.to(ending, {
            opacity: 1,
            scale: 1,
            duration: 1,
            ease: 'elastic.out(1, 0.3)'
          });
        }

        // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’æ›´æ–°
        prevBtn.disabled = index === 0;
        nextBtn.innerHTML = index === sections.length - 1 ? 'çµ‚äº†' : 'æ¬¡ã¸';
      }

      // ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’éè¡¨ç¤ºã«ã™ã‚‹é–¢æ•°
      function hideSection(index) {
        gsap.to(sections[index], {
          opacity: 0,
          duration: 0.5,
          ease: 'power2.in'
        });
      }

      // é€²æ—ãƒãƒ¼ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
      function updateProgressBar() {
        const progress = (currentSectionIndex / (sections.length - 1)) * 100;
        progressBar.style.width = progress + '%';
      }

      // å®‰å…¨ãƒ†ãƒ¼ãƒ—ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
      const safetyTapes = document.querySelectorAll('.safety-tape');
      safetyTapes.forEach(tape => {
        gsap.to(tape, {
          left: '0%',
          duration: 15,
          repeat: -1,
          ease: 'linear'
        });
      });

      // ãƒ˜ãƒ«ãƒ¡ãƒƒãƒˆã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
      const hardHat = document.querySelector('.hard-hat');
      gsap.to(hardHat, {
        rotation: 25,
        duration: 2,
        repeat: -1,
        yoyo: true,
        ease: 'power1.inOut'
      });
    });
  </script>
</body>
</html>
